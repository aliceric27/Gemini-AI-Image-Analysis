# ğŸ–¼ï¸ AI åœ–åƒåˆ†æ API

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Node.js Version](https://img.shields.io/badge/node.js-18+-green.svg)](https://nodejs.org/)
[![React](https://img.shields.io/badge/React-19.1.0-blue.svg)](https://reactjs.org/)
[![Gemini API](https://img.shields.io/badge/Gemini-Pro%202.5-orange.svg)](https://ai.google.dev/)

åŸºæ–¼ **Gemini Pro 2.5 API** çš„æ™ºèƒ½åœ–åƒåˆ†ææ‡‰ç”¨ç¨‹å¼ï¼Œæä¾›å¼·å¤§çš„å¤šæ¨¡æ…‹ AI èƒ½åŠ›ã€‚ä½¿ç”¨è€…å¯ä»¥ä¸Šå‚³åœ–ç‰‡ä¸¦æŒ‡å®šæ‰€éœ€çš„ JSON çµæ§‹ï¼Œç³»çµ±å°‡è‡ªå‹•åˆ†æåœ–åƒå…§å®¹ä¸¦å›å‚³çµæ§‹åŒ–çš„ JSON è³‡æ–™ã€‚

![demo](./demo.png)

## âœ¨ ä¸»è¦åŠŸèƒ½

- ğŸ” **æ™ºèƒ½åœ–åƒåˆ†æ** - ä½¿ç”¨ Google Gemini Pro 2.5 é€²è¡Œæ·±åº¦åœ–åƒç†è§£
- ğŸ“ **è‡ªè¨‚ JSON çµæ§‹** - æŒ‡å®šè¼¸å‡ºæ ¼å¼ï¼Œç²å–çµæ§‹åŒ–è³‡æ–™
- ğŸ–¼ï¸ **å¤šæ ¼å¼æ”¯æ´** - æ”¯æ´ JPEGã€PNGã€WebPã€GIF ç­‰æ ¼å¼
- ğŸš€ **å³æ™‚è™•ç†** - å¿«é€Ÿå›æ‡‰å’Œè™•ç†åœ–åƒè«‹æ±‚
- ğŸ”’ **å®‰å…¨å¯é ** - å…§å»ºé€Ÿç‡é™åˆ¶å’Œå®‰å…¨ä¸­ä»‹è»Ÿé«”
- ğŸ“± **éŸ¿æ‡‰å¼è¨­è¨ˆ** - ç¾ä»£åŒ–çš„ä½¿ç”¨è€…ä»‹é¢
- ğŸ³ **å®¹å™¨åŒ–éƒ¨ç½²** - æ”¯æ´ Docker ä¸€éµéƒ¨ç½²

## ğŸ“‹ ç›®éŒ„

- [æŠ€è¡“å †ç–Š](#-æŠ€è¡“å †ç–Š)
- [å°ˆæ¡ˆçµæ§‹](#-å°ˆæ¡ˆçµæ§‹)
- [å¿«é€Ÿé–‹å§‹](#-å¿«é€Ÿé–‹å§‹)
- [API æ–‡ä»¶](#-api-æ–‡ä»¶)
- [ç’°å¢ƒè®Šæ•¸](#-ç’°å¢ƒè®Šæ•¸)
- [é–‹ç™¼æŒ‡ä»¤](#-é–‹ç™¼æŒ‡ä»¤)
- [Docker éƒ¨ç½²](#-docker-éƒ¨ç½²)
- [æ”¯æ´æ ¼å¼](#-æ”¯æ´æ ¼å¼)
- [API Key è¨­ç½®](#-api-key-è¨­ç½®)
- [æ•…éšœæ’é™¤](#-æ•…éšœæ’é™¤)
- [è²¢ç»æŒ‡å—](#-è²¢ç»æŒ‡å—)
- [æˆæ¬Šæ¢æ¬¾](#-æˆæ¬Šæ¢æ¬¾)

## ğŸ› ï¸ æŠ€è¡“å †ç–Š

### å‰ç«¯
- **React 19.1.0** - ç¾ä»£åŒ–çš„å‰ç«¯æ¡†æ¶
- **Vite 7.0.4** - å¿«é€Ÿçš„å»ºç½®å·¥å…·
- **React Dropzone** - æ‹–æ‹½ä¸Šå‚³åŠŸèƒ½
- **Axios** - HTTP å®¢æˆ¶ç«¯

### å¾Œç«¯
- **Node.js 18+** - æœå‹™å™¨é‹è¡Œç’°å¢ƒ
- **Express 5.1.0** - Web æ‡‰ç”¨æ¡†æ¶
- **Gemini Pro 2.5 API** - Google çš„å¤šæ¨¡æ…‹ AI API
- **Multer** - æª”æ¡ˆä¸Šå‚³è™•ç†
- **Sharp** - åœ–åƒè™•ç†
- **Winston** - æ—¥èªŒè¨˜éŒ„
- **Helmet** - å®‰å…¨ä¸­ä»‹è»Ÿé«”

### éƒ¨ç½²èˆ‡å·¥å…·
- **Docker** - å®¹å™¨åŒ–éƒ¨ç½²
- **pnpm** - å¥—ä»¶ç®¡ç†å™¨
- **ESLint** - ç¨‹å¼ç¢¼å“è³ªæª¢æŸ¥

## ğŸ“ å°ˆæ¡ˆçµæ§‹

```
ai-img-api/
â”œâ”€â”€ ğŸ“ frontend/          # React å‰ç«¯æ‡‰ç”¨
â”‚   â”œâ”€â”€ ğŸ“ src/
â”‚   â”‚   â”œâ”€â”€ ğŸ“ components/  # React å…ƒä»¶
â”‚   â”‚   â”œâ”€â”€ ğŸ“ utils/       # å·¥å…·å‡½æ•¸
â”‚   â”‚   â””â”€â”€ ğŸ“„ App.jsx      # ä¸»æ‡‰ç”¨å…ƒä»¶
â”‚   â”œâ”€â”€ ğŸ“„ package.json
â”‚   â””â”€â”€ ğŸ“„ vite.config.js
â”œâ”€â”€ ğŸ“ backend/           # Node.js/Express API
â”‚   â”œâ”€â”€ ğŸ“ controllers/    # æ§åˆ¶å™¨
â”‚   â”œâ”€â”€ ğŸ“ services/       # æœå‹™å±¤
â”‚   â”œâ”€â”€ ğŸ“ middleware/     # ä¸­ä»‹è»Ÿé«”
â”‚   â”œâ”€â”€ ğŸ“ utils/          # å·¥å…·å‡½æ•¸
â”‚   â”œâ”€â”€ ğŸ“ config/         # é…ç½®æª”æ¡ˆ
â”‚   â”œâ”€â”€ ğŸ“„ index.js        # å…¥å£æª”æ¡ˆ
â”‚   â””â”€â”€ ğŸ“„ package.json
â”œâ”€â”€ ğŸ“ shared/            # å…±ç”¨å·¥å…·å’Œé¡å‹
â”œâ”€â”€ ğŸ“ docs/              # å°ˆæ¡ˆæ–‡ä»¶
â”œâ”€â”€ ğŸ“ docker/            # Docker é…ç½®æª”æ¡ˆ
â”œâ”€â”€ ğŸ“ changelog/         # è®Šæ›´æ—¥èªŒ
â”œâ”€â”€ ğŸ“„ .gitignore
â”œâ”€â”€ ğŸ“„ README.md
â””â”€â”€ ğŸ“„ TO-DO.md
```

## ğŸš€ å¿«é€Ÿé–‹å§‹

### ğŸ“‹ å‰ç½®è¦æ±‚

åœ¨é–‹å§‹ä¹‹å‰ï¼Œè«‹ç¢ºä¿æ‚¨çš„é–‹ç™¼ç’°å¢ƒæ»¿è¶³ä»¥ä¸‹éœ€æ±‚ï¼š

- **Node.js** >= 18.0.0 ğŸ“¦
- **pnpm** >= 8.0.0 æˆ– **npm** >= 8.0.0 ğŸ“¦
- **Git** - ç‰ˆæœ¬æ§åˆ¶ ğŸ”§
- **Gemini API Key** - [å–å¾—æ–¹å¼](#-api-key-è¨­ç½®) ğŸ”‘

### 1ï¸âƒ£ å…‹éš†å°ˆæ¡ˆ

```bash
# å…‹éš†å°ˆæ¡ˆåˆ°æœ¬åœ°
git clone <repository-url>
cd ai-img-api
```

### 2ï¸âƒ£ å¾Œç«¯è¨­ç½®

```bash
# é€²å…¥å¾Œç«¯ç›®éŒ„
cd backend

# å®‰è£ä¾è³´ (æ¨è–¦ä½¿ç”¨ pnpm)
pnpm install
# æˆ–ä½¿ç”¨ npm
# npm install
```

**é…ç½®ç’°å¢ƒè®Šæ•¸ï¼š**
```bash
# è¤‡è£½ç’°å¢ƒè®Šæ•¸ç¯„ä¾‹æª”æ¡ˆ
cp .env.example .env
```

ç·¨è¼¯ `.env` æª”æ¡ˆï¼Œè¨­ç½®æ‚¨çš„ Gemini API Keyï¼š
```env
# å¿…å¡«ï¼šGemini API é‡‘é‘°
GEMINI_API_KEY=your_actual_gemini_api_key_here

# å¯é¸ï¼šå…¶ä»–é…ç½®
PORT=3001
NODE_ENV=development
MAX_FILE_SIZE=10485760
```

**å•Ÿå‹•å¾Œç«¯æœå‹™ï¼š**
```bash
pnpm run dev
# æˆ– npm run dev
```

âœ… å¾Œç«¯æœå‹™å°‡åœ¨ [http://localhost:3001](http://localhost:3001) é‹è¡Œ

### 3ï¸âƒ£ å‰ç«¯è¨­ç½®

é–‹å•Ÿæ–°çš„çµ‚ç«¯è¦–çª—ï¼š

```bash
# é€²å…¥å‰ç«¯ç›®éŒ„
cd frontend

# å®‰è£ä¾è³´
pnpm install
# æˆ– npm install
```

**é…ç½®ç’°å¢ƒè®Šæ•¸ï¼š**
```bash
# è¤‡è£½ç’°å¢ƒè®Šæ•¸ç¯„ä¾‹æª”æ¡ˆ
cp .env.example .env
```

**å•Ÿå‹•å‰ç«¯é–‹ç™¼æœå‹™å™¨ï¼š**
```bash
pnpm run dev
# æˆ– npm run dev
```

âœ… å‰ç«¯æ‡‰ç”¨å°‡åœ¨ [http://localhost:5173](http://localhost:5173) é‹è¡Œ

### 4ï¸âƒ£ é–‹å§‹ä½¿ç”¨

1. é–‹å•Ÿç€è¦½å™¨è¨ªå• [http://localhost:5173](http://localhost:5173)
2. ä¸Šå‚³ä¸€å¼µåœ–ç‰‡
3. é¸æ“‡æ€§åœ°æŒ‡å®š JSON çµæ§‹
4. é»æ“Šåˆ†ææŒ‰éˆ•
5. æŸ¥çœ‹çµæ§‹åŒ–çš„åˆ†æçµæœï¼

## API ç«¯é»

### å¥åº·æª¢æŸ¥
```
GET /health
```

### åœ–åƒåˆ†æ
```
POST /api/analyze
Content-Type: multipart/form-data

Parameters:
- image: åœ–ç‰‡æ–‡ä»¶ (æœ€å¤§ 10MB)
- jsonStructure: æœŸæœ›çš„JSONçµæ§‹ (å¯é¸)
```

## ç’°å¢ƒè®Šæ•¸èªªæ˜

### å¾Œç«¯ç’°å¢ƒè®Šæ•¸ (backend/.env)

| è®Šæ•¸åç¨± | èªªæ˜ | é è¨­å€¼ |
|---------|------|--------|
| `PORT` | æœå‹™å™¨ç«¯å£ | `3001` |
| `GEMINI_API_KEY` | Gemini API é‡‘é‘° | - |
| `MAX_FILE_SIZE` | æœ€å¤§æ–‡ä»¶å¤§å° (bytes) | `10485760` |
| `FRONTEND_URL` | å‰ç«¯URL (CORSè¨­å®š) | `http://localhost:5173` |

### å‰ç«¯ç’°å¢ƒè®Šæ•¸ (frontend/.env)

| è®Šæ•¸åç¨± | èªªæ˜ | é è¨­å€¼ |
|---------|------|--------|
| `VITE_API_BASE_URL` | å¾Œç«¯APIåŸºç¤URL | `http://localhost:3001` |
| `VITE_MAX_FILE_SIZE` | æœ€å¤§æ–‡ä»¶å¤§å° (bytes) | `10485760` |

## é–‹ç™¼æŒ‡ä»¤

### å¾Œç«¯
```bash
cd backend
npm run start    # å•Ÿå‹•ç”Ÿç”¢ç’°å¢ƒ
npm run dev      # å•Ÿå‹•é–‹ç™¼ç’°å¢ƒ
npm test         # é‹è¡Œæ¸¬è©¦
```

### å‰ç«¯
```bash
cd frontend
npm run dev      # å•Ÿå‹•é–‹ç™¼æœå‹™å™¨
npm run build    # å»ºç½®ç”Ÿç”¢ç‰ˆæœ¬
npm run preview  # é è¦½ç”Ÿç”¢ç‰ˆæœ¬
```

## æ”¯æ´çš„åœ–ç‰‡æ ¼å¼

- JPEG (.jpg, .jpeg)
- PNG (.png)
- WebP (.webp)
- GIF (.gif)

## ç²å– Gemini API Key

1. å‰å¾€ [Google AI Studio](https://makersuite.google.com/app/apikey)
2. ç™»å…¥æ‚¨çš„ Google å¸³æˆ¶
3. é»æ“Š "Create API Key"
4. è¤‡è£½ç”Ÿæˆçš„ API Key
5. å°‡ API Key è¨­ç½®åˆ° `backend/.env` æ–‡ä»¶ä¸­çš„ `GEMINI_API_KEY` è®Šæ•¸

## æ³¨æ„äº‹é …

- è«‹å¦¥å–„ä¿ç®¡æ‚¨çš„ Gemini API Keyï¼Œä¸è¦å°‡å…¶æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»çµ±
- é–‹ç™¼æ™‚è«‹ç¢ºä¿å‰å¾Œç«¯æœå‹™éƒ½åœ¨é‹è¡Œ
- åœ–ç‰‡ä¸Šå‚³é™åˆ¶ç‚º 10MB
- API ä½¿ç”¨é‡å¯èƒ½ç”¢ç”Ÿè²»ç”¨ï¼Œè«‹åƒè€ƒ Google AI å®šåƒ¹

## æ•…éšœæ’é™¤

### å¸¸è¦‹å•é¡Œ

1. **å¾Œç«¯ç„¡æ³•å•Ÿå‹•**
   - æª¢æŸ¥ Node.js ç‰ˆæœ¬æ˜¯å¦ç¬¦åˆè¦æ±‚
   - ç¢ºèªæ‰€æœ‰ä¾è³´å·²æ­£ç¢ºå®‰è£
   - æª¢æŸ¥ç«¯å£ 3001 æ˜¯å¦è¢«å ç”¨

2. **å‰ç«¯ç„¡æ³•é€£æ¥å¾Œç«¯**
   - ç¢ºèªå¾Œç«¯æœå‹™æ­£åœ¨é‹è¡Œ
   - æª¢æŸ¥ `VITE_API_BASE_URL` è¨­å®šæ˜¯å¦æ­£ç¢º
   - æª¢æŸ¥ç€è¦½å™¨æ§åˆ¶å°æ˜¯å¦æœ‰ CORS éŒ¯èª¤

3. **Gemini API éŒ¯èª¤**
   - ç¢ºèª API Key è¨­å®šæ­£ç¢º
   - æª¢æŸ¥ API ä½¿ç”¨é‡æ˜¯å¦è¶…å‡ºé™åˆ¶
   - ç¢ºèªç¶²è·¯é€£æ¥æ­£å¸¸

## è²¢ç»æŒ‡å—

1. Fork å°ˆæ¡ˆ
2. å‰µå»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add amazing feature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. é–‹å•Ÿ Pull Request

## æˆæ¬Š

æœ¬å°ˆæ¡ˆæ¡ç”¨ MIT æˆæ¬Šæ¢æ¬¾ - è©³è¦‹ [LICENSE](LICENSE) æ–‡ä»¶ã€‚